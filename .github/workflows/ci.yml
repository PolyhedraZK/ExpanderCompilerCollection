name: ci

on: [push, pull_request]

env:
  RUSTFLAGS: "-Dwarnings"
  RUST_BACKTRACE: 1

jobs:
  test-rust-avx512:
    runs-on: 7950x3d
    steps:
      - uses: styfle/cancel-workflow-action@0.11.0
      - uses: actions/checkout@v4
        with:
          path: ecc2 # due to misoperation, the original path is occupied by other files
      - run: sudo docker run --rm -v .:/tmp/ecc2:ro rust:1.84-bullseye /tmp/ecc/ecc2/.github/workflows/docker-scripts/test-rust-avx512.sh
